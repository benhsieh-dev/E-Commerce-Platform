### Notification Service API Tests

@NotificationServiceUrl = https://localhost:5006

### Health Check
GET {{NotificationServiceUrl}}/health

### Get All Templates
GET {{NotificationServiceUrl}}/api/templates

### Get Template by ID
GET {{NotificationServiceUrl}}/api/templates/11111111-1111-1111-1111-111111111111

### Create Template
POST {{NotificationServiceUrl}}/api/templates
Content-Type: application/json

{
  "name": "WelcomeEmail",
  "type": 12,
  "channel": 0,
  "subject": "Welcome to AirBnB Platform, {{UserName}}!",
  "bodyTemplate": "Dear {{UserName}},\n\nWelcome to our platform! We're excited to have you join our community.\n\nBest regards,\nThe AirBnB Platform Team",
  "htmlTemplate": "<h1>Welcome {{UserName}}!</h1><p>Welcome to our platform! We're excited to have you join our community.</p>",
  "description": "Welcome email template for new users"
}

### Update Template
PUT {{NotificationServiceUrl}}/api/templates/11111111-1111-1111-1111-111111111111
Content-Type: application/json

{
  "subject": "Updated: Booking Confirmed - {{PropertyTitle}}",
  "description": "Updated booking confirmation template"
}

### Preview Template
POST {{NotificationServiceUrl}}/api/templates/11111111-1111-1111-1111-111111111111/preview
Content-Type: application/json

{
  "PropertyTitle": "Beautiful Beach House",
  "GuestName": "John Doe",
  "CheckInDate": "2024-07-15",
  "CheckOutDate": "2024-07-20",
  "GuestCount": "2",
  "TotalAmount": "$750.00"
}

### Send Template Notification
POST {{NotificationServiceUrl}}/api/notifications/template
Content-Type: application/json

{
  "userId": "123e4567-e89b-12d3-a456-426614174000",
  "templateId": "11111111-1111-1111-1111-111111111111",
  "channel": 0,
  "priority": 1,
  "recipientEmail": "john.doe@example.com",
  "templateData": {
    "PropertyTitle": "Beautiful Beach House",
    "GuestName": "John Doe",
    "CheckInDate": "2024-07-15",
    "CheckOutDate": "2024-07-20",
    "GuestCount": "2",
    "TotalAmount": "$750.00"
  },
  "bookingId": "456e7890-e89b-12d3-a456-426614174000"
}

### Send Custom Notification
POST {{NotificationServiceUrl}}/api/notifications
Content-Type: application/json

{
  "userId": "123e4567-e89b-12d3-a456-426614174000",
  "type": 0,
  "channel": 0,
  "title": "Your booking is confirmed!",
  "content": "Thank you for your booking. We look forward to hosting you!",
  "priority": 1,
  "recipientEmail": "john.doe@example.com",
  "bookingId": "456e7890-e89b-12d3-a456-426614174000"
}

### Send Bulk Notifications
POST {{NotificationServiceUrl}}/api/notifications/bulk
Content-Type: application/json

{
  "userIds": [
    "123e4567-e89b-12d3-a456-426614174000",
    "789e0123-e89b-12d3-a456-426614174000"
  ],
  "templateId": "22222222-2222-2222-2222-222222222222",
  "channel": 0,
  "priority": 1,
  "templateData": {
    "PropertyTitle": "Summer Special Property",
    "CheckInDate": "2024-08-01",
    "CheckInTime": "3:00 PM",
    "PropertyAddress": "123 Beach Lane, Miami, FL"
  }
}

### Get User Notifications
GET {{NotificationServiceUrl}}/api/notifications/user/123e4567-e89b-12d3-a456-426614174000?page=1&pageSize=10

### Get Notification by ID
GET {{NotificationServiceUrl}}/api/notifications/456e7890-e89b-12d3-a456-426614174000

### Mark Notifications as Read
POST {{NotificationServiceUrl}}/api/notifications/mark-read
Content-Type: application/json

{
  "notificationIds": [
    "456e7890-e89b-12d3-a456-426614174000",
    "789e0123-e89b-12d3-a456-426614174000"
  ]
}

### Retry Failed Notification
POST {{NotificationServiceUrl}}/api/notifications/456e7890-e89b-12d3-a456-426614174000/retry

### Get Notification Statistics
GET {{NotificationServiceUrl}}/api/notifications/stats?fromDate=2024-01-01&toDate=2024-12-31

### Get User Preferences
GET {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000

### Update User Preferences
PUT {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000
Content-Type: application/json

{
  "preferences": [
    {
      "notificationType": 0,
      "emailEnabled": true,
      "smsEnabled": false,
      "pushEnabled": true,
      "inAppEnabled": true
    },
    {
      "notificationType": 1,
      "emailEnabled": true,
      "smsEnabled": true,
      "pushEnabled": true,
      "inAppEnabled": true
    }
  ]
}

### Update Specific Notification Type Preference
PUT {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000/type/0
Content-Type: application/json

{
  "notificationType": 0,
  "emailEnabled": true,
  "smsEnabled": false,
  "pushEnabled": true,
  "inAppEnabled": true
}

### Reset User Preferences to Defaults
POST {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000/reset

### Disable All Notifications for User
POST {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000/disable-all

### Enable All Notifications for User
POST {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000/enable-all

### Get Default Preferences
GET {{NotificationServiceUrl}}/api/preferences/defaults

### Get Channel-Specific Preferences
GET {{NotificationServiceUrl}}/api/preferences/123e4567-e89b-12d3-a456-426614174000/channel/0

### Validate Template
POST {{NotificationServiceUrl}}/api/templates/validate
Content-Type: application/json

{
  "name": "TestTemplate",
  "type": 0,
  "channel": 0,
  "subject": "Test Subject - {{UserName}}",
  "bodyTemplate": "Hello {{UserName}}, this is a test template with {{TestField}}.",
  "description": "Test template for validation"
}

### Get Notification Types
GET {{NotificationServiceUrl}}/api/templates/types

### Get Notification Channels
GET {{NotificationServiceUrl}}/api/templates/channels

### Deactivate Template
POST {{NotificationServiceUrl}}/api/templates/11111111-1111-1111-1111-111111111111/deactivate

### Activate Template
POST {{NotificationServiceUrl}}/api/templates/11111111-1111-1111-1111-111111111111/activate